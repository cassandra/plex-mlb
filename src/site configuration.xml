<site site="http://mlb.mlb.com"
    plugin="http://mlb.mlb.com/flash/mediaplayer/v4/RC9/MediaPlayer4.swf"
    identifier="com.plexapp.plugins.mlb"
    initialState="playing"
    version="1.0">

    <crop x="0" y="102" width="800" height="450" />

    <state name="noop"/>

    <!-- playing -->
    <state name="playing">
        <!-- showing the login form -->
        <event>
            <condition>
                <condition name="prompting-for-login"/>
            </condition>
            <action>
                <goto state="login"/>
            </action>
        </event>
    </state>

    <state name="login">
        <event>
            <condition>
                <condition name="prompting-for-login"/>
            </condition>
            <action>
                <!-- "double click" the email input to select all -->
                <click x="98" y="415"/>
                <click x="98" y="415"/>
                <pause time="10"/>
                <type text="${login}"/>

                <!-- click the password input -->
                <pause time="10"/>
                <click x="98" y="445"/>
                <pause time="10"/>
                <type text="${password}"/>

                <!-- submit the form -->
                <pause time="10"/>
                <type key="13"/>
                <!-- <click x="196" y="467"/> -->

                <!-- wait for the form to animate closed -->
                <pause time="1000"/>

                <!-- temp. jump out of this event so it doesn't sit here looping -->
                <goto state="noop"/>
            </action>
        </event>
    </state>

    <condition name="loaded">
        <and>
            <color x="98" y="1" rgb="000000"/>
        </and>
    </condition>

    <condition name="prompting-for-login">
        <and>
            <condition name="loaded"/>
            <color x="98" y="415" rgb="ffffff"/>
            <color x="98" y="445" rgb="ffffff"/>
        </and>
    </condition>
</site>
